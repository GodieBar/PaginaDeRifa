<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rifa Diaria - Gana hasta 5000 MXN</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://sdk.mercadopago.com/js/v2"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>üéâ Rifa Diaria <small>Invierte 20 o 100 pesos MXN y entra al sorteo del d√≠a</small></h1>
      <p>¬°Hoy puedes ganar entre <strong>3000 y 5000 pesos Mexicanos</strong>!</p>
      <a href="admin.html" class="admin-link">Panel Admin</a>
    </header>

    <form id="raffleForm">
      <input type="text" id="name" placeholder="Nombre completo" required>
      <input type="text" id="curp" placeholder="CURP" pattern="^[A-Z]{4}\d{6}[HM][A-Z]{5}[0-9A-Z]{2}$" title="CURP inv√°lida. Revisa el formato." required>
      <input type="tel" id="phone" placeholder="Celular (10 d√≠gitos)" pattern="[0-9]{10}" required>
      <input type="text" id="number" placeholder="N√∫mero de 4 cifras (0000-9999)" 
             pattern="\d{4}" title="Debe ingresar exactamente 4 d√≠gitos" 
             maxlength="4" required
             oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4)">
      
      <div class="amount-selection">
        <h3>Selecciona tu participaci√≥n:</h3>
        <div class="amount-options">
          <label>
            <input type="radio" name="amount" value="20" checked> 
            <span>20 MXN - 1 n√∫mero</span>
          </label>
          <label>
            <input type="radio" name="amount" value="100"> 
            <span>100 MXN - 5 n√∫meros</span>
          </label>
        </div>
      </div>
      
      <label class="checkbox">
        <input type="checkbox" id="terms" required>
        Acepto t√©rminos y condiciones.
      </label>
      
      <button type="button" id="continueToPayment">Continuar al pago</button>
      <div id="payment-button" class="hidden"></div>
      <button type="button" onclick="showAvailableNumbers()">Ver n√∫meros disponibles</button>
    </form>

    <div id="winnerSection" class="hidden">
      <h2>üèÜ Ganador del d√≠a</h2>
      <div id="winnerInfo"></div>
    </div>

    <div class="countdown">
      <p>Sorteo en: <span id="countdown">17:00:00</span></p>
    </div>

    <div class="previous-winners">
      <h3>√öltimos ganadores</h3>
      <ul id="winnerList"></ul>
    </div>
  </div>

  <div id="termsModal" class="modal hidden">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>T√©rminos y Condiciones</h2>
      <div class="terms-text">
        <p>1. Participaci√≥n v√°lida solo para mayores de 18 a√±os.</p>
        <p>2. El sorteo se realiza diariamente a las 17:00 hrs.</p>
        <p>3. Premios sujetos a verificaci√≥n de identidad.</p>
        <p>4. Solo participaciones pagadas ser√°n incluidas en el sorteo.</p>
      </div>
    </div>
  </div>

  <script type="module" src="firebase.js"></script>
  <script type="module" src="script.js"></script>
  <script src="mercadopago.js"></script>
</body>
</html>